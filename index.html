<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Verkefni 2</title>
	<link rel="stylesheet" type="text/css" href="css/foundation.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
	<script src="js/vendor/jquery.js"></script>
	<script src="js/foundation/foundation.js"></script>
	<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
</head>
<body>
	<div class="nav">
		<h1 class="center">Music in Iceland</h1>
	</div>
	<form>
		<div class="row">
			<div class="large-5 columns">
				<label>Date From:
					<input type="text" id="datefrom" placeholder="Date From">
				</label>
			</div>
			<div class="large-5 columns">
				<label>Date To:
					<input type="text" id="dateto" placeholder="Date To">
				</label>
			</div>
			<input type="button" class="button small large-2 columns" id="button" value="Look for concerts" onclick="getConcerts()">
		</div>
	</form>
	<div class="row">
		<div class="large-12 columns">
			<ul class="mainStuff">
				
			</ul>
		</div>
	</div>
<script>
$(document).ready(function() {
	$.ajax({
		'url': 'http://apis.is/concerts',
		'type': 'GET',
		'dataType': 'json',
		'success': function(response){
			console.log(response);

			// Gets the number of objects
			var responseLength = Object.keys(response.results).length;

			for(var i = 0; i < responseLength; i++)
			{
				var cleanDate = response.results[i].dateOfShow;
				var cutDate = cleanDate.substring(0,10);

				var data = "<li date='" + response.results[i].dateOfShow + "'><div class='row idfk'><div class='large-8 columns'><span class='title'>" + response.results[i].eventDateName + "</span><br><span class='idk'>" + response.results[i].name + "</span><br><span class='idk'>" + response.results[i].eventHallName + "</span><br><span class='date'>" + cutDate + "</span><span class='group'>" + response.results[i].userGroupName + "</span></div><div class='large-4 columns'><img src='" + response.results[i].imageSource + "'></div></div></li>";

				$(".mainStuff").append(data);
			}
		}
	});
	$("#datefrom").datepicker({dateFormat: 'yy-mm-dd'});
	$("#dateto").datepicker({dateFormat: 'yy-mm-dd'});
});

function getConcerts(){
	$(".mainStuff").empty();
	var dateFrom = $("#datefrom").val();
	console.log(dateFrom);
}
</script>
</body>
</html>